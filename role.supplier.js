var util=require("util"),task_manager=require("task_manager");
module.exports={name:"role.supplier",parts:null,part_generator:function(){module.exports.parts=[[CARRY,WORK,MOVE]];var f=module.exports.parts;if(0==f.length)for(var a=[],d=1,c=1;;){d++;0==d%2&&c++;for(var b=0;b<d;b++)a.push(CARRY);a.push(WORK);for(b=0;b<c;b++)a.push(MOVE);if(50<a.length)break;else f.push(a)}},run:function(f,a){if(0==a.carry.energy)return a.add_task({type:"resupply"}),{outcome:"continue"};var d=[[STRUCTURE_EXTENSION,STRUCTURE_SPAWN],STRUCTURE_TOWER,STRUCTURE_STORAGE],c,b;for(b in d){var e=
a.pos.findNeedingEnergyStructures(d[b]);if(1<e.length){c=a.pos.findClosestByRange(e);break}else if(1==e.length){c=e[0];break}}c?a.add_task({type:"transfer_energy",target_id:c.id}):a.move(Math.floor(8*Math.random()+1));return{outcome:"continue"}}};task_manager.register(module.exports.name,module.exports.run);module.exports.part_generator();
