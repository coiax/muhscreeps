var util=require("util"),task_manager=require("task_manager");
module.exports={name:"role.supplier",parts:[[WORK,CARRY,MOVE],[WORK,CARRY,CARRY,MOVE,MOVE],[WORK,CARRY,CARRY,CARRY,MOVE,MOVE],[CARRY,CARRY,CARRY,CARRY,WORK,MOVE,MOVE,MOVE],[CARRY,CARRY,CARRY,CARRY,CARRY,WORK,MOVE,MOVE,MOVE],[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,WORK,MOVE,MOVE,MOVE,MOVE],[CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,CARRY,WORK,MOVE,MOVE,MOVE,MOVE]],run:function(f,a){if(0==a.carry.energy)return a.add_task({type:"resupply"}),{outcome:"continue"};var d=[STRUCTURE_TOWER,[STRUCTURE_EXTENSION,STRUCTURE_SPAWN],
STRUCTURE_STORAGE],b,e;for(e in d){var c=a.pos.findNeedingEnergyStructures(d[e]);if(1<c.length){b=a.pos.findClosestByRange(c);break}else if(1==c.length){b=c[0];break}}b?a.add_task({type:"transfer_energy",target_id:b.id}):a.move(Math.floor(8*Math.random()+1));return{outcome:"continue"}}};task_manager.register(module.exports.name,module.exports.run);
