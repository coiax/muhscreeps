Creep.prototype.add_task=function(c){this.memory.task_queue||(this.memory.task_queue=[]);this.memory.task_queue.unshift(c)};Creep.prototype.pop_task=function(){this.memory.task_queue=_.drop(this.memory.task_queue);0==this.memory.task_queue.length&&(this.memory.task_queue=void 0)};
module.exports={harvest:function(c,a){if(a.carryCapacity==a.carry.energy)return{outcome:"done"};var b=Game.getObjectById(c.selected_source_id);b||(b=a.pos.findClosestByPath(FIND_SOURCES),c.selected_source_id=b.id);return a.harvest(b)==ERR_NOT_IN_RANGE?(a.moveTo(b),{outcome:"continue"}):a.carryCapacity==a.carry.energy?{outcome:"done"}:{outcome:"continue"}},construct:function(c,a){var b=c.resupply,d=Game.getObjectById(c.target_id);if(!d)return a.say("cs ?!?"),{outcome:"done"};if(0==a.carry.energy)return b?
{outcome:"newtask",task:{type:"harvest"}}:{outcome:"done"};if("undefined"==typeof d.progress){if(d.hits==d.hitsMax)return{outcome:"done"};b=a.repair(d)}else b=a.build(d);b==ERR_NOT_IN_RANGE&&a.moveTo(d);return{outcome:"continue"}},resupply:function(c,a){var b=Game.getObjectById(c.gas_station_id);b||(b=a.room.find(FIND_STRUCTURES,{filter:function(a){return a.structureType==STRUCTURE_CONTAINER}}),b=a.pos.findClosestByPath(b),c.gas_station_id=b.id)}};
