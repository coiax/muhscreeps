Creep.prototype.add_task=function(a){this.memory.task_queue||(this.memory.task_queue=[]);this.memory.task_queue.unshift(a)};Creep.prototype.pop_task=function(){this.memory.task_queue=_.drop(this.memory.task_queue);0==this.memory.task_queue.length&&(this.memory.task_queue=void 0)};
module.exports={harvest:function(a){if(a.carryCapacity==a.carry.energy)return a.memory.selected_source_id=void 0,!0;var b;a.memory.selected_source_id?b=Game.getObjectById(a.memory.selected_source_id):(b=a.pos.findClosestByPath(FIND_SOURCES),a.memory.selected_source_id=b.id);return a.harvest(b)==ERR_NOT_IN_RANGE?(a.moveTo(b),!1):a.carryCapacity==a.carry.energy?(a.memory.selected_source_id=void 0,!0):!1},construct:function(a,b,c){b=Game.getObjectById(b);if(!b)return a.say("cs ?!?"),!0;if(0==a.carry.energy)return c?
(a.add_task({type:"harvest"}),!1):!0;if("undefined"==typeof b.progress){if(b.hits==b.hitsMax)return!0;c=a.repair(b)}else c=a.build(b);c==ERR_NOT_IN_RANGE&&a.moveTo(b);return!1}};
