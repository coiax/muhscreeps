var genericActions=require("genericactions"),roleHarvester=require("role.harvester"),roleUpgrader=require("role.upgrader"),roleBuilder=require("role.builder"),roleCow=require("role.cow"),mother=require("mother");
module.exports.loop=function(){mother.run();for(var d in Game.creeps){var a=Game.creeps[d];if(!a.spawning){var c=a.memory.task_queue;if(c&&c.length){var b=c[0];"harvest"==b.type?(b=genericActions.harvest(a))&&a.pop_task():"construct"==b.type&&(b=genericActions.construct(a,b.target,b.resupply))&&a.pop_task();if(c&&c.length)continue}"harvester"==a.memory.role&&roleHarvester.run(a);"upgrader"==a.memory.role&&roleUpgrader.run(a);"builder"==a.memory.role&&roleBuilder.run(a);"cow"==a.memory.role&&roleCow.run(a)}}};
