function creeps_of_role(a){return _.filter(Game.creeps,function(b){return b.memory.role==a})}
function build_creep(a){var b,d=Game.spawns.Spawn2,c;c=0==d.room.find(FIND_MY_CREEPS).length?d.room.energyAvailable:d.room.energyCapacityAvailable;!b&&600<=c&&(b="guard"==a?[RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,MOVE,MOVE,MOVE]:[WORK,WORK,WORK,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE]);!b&&400<=c&&(b="guard"==a?[RANGED_ATTACK,RANGED_ATTACK,MOVE,MOVE]:[WORK,WORK,CARRY,CARRY,MOVE,MOVE]);b||(b="guard"==a?[RANGED_ATTACK,MOVE]:[WORK,CARRY,MOVE]);d.canCreateCreep(b)==OK&&(c=a+Memory.muhid,Memory.muhid++,d.createCreep(b,
c,{role:a}))}module.exports={run:function(){"undefined"==typeof Memory.muhid&&(Memory.muhid=1);for(var a in Memory.creeps)Game.creeps[a]||delete Memory.creeps[a];a=["harvester","cow","upgrader","builder","guard"];var b={harvester:2,cow:4,upgrader:3,builder:3,guard:3},d;for(d in a){var c=a[d],e=creeps_of_role(c).length;console.log(c+"|C:"+e+"|R:"+b[c]);if(e<b[c]){build_creep(c);break}}}};
