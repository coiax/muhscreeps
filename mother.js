function creeps_of_role(b){return _.filter(Game.creeps,function(a){return a.memory.role==b})}
function build_creep(b){var a,c=Game.spawns.Spawn2,d;d=0==c.room.find(FIND_MY_CREEPS).length?c.room.energyAvailable:c.room.energyCapacityAvailable;!a&&600<=d&&(a="guard"==b?[RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,MOVE,MOVE,MOVE]:[WORK,WORK,WORK,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE]);!a&&400<=d&&(a="guard"==b?[RANGED_ATTACK,RANGED_ATTACK,MOVE,MOVE]:[WORK,WORK,CARRY,CARRY,MOVE,MOVE]);a||(a="guard"==b?[RANGED_ATTACK,MOVE]:[WORK,CARRY,MOVE]);c.canCreateCreep(a)==OK&&(d=b+Memory.muhid,Memory.muhid++,c.createCreep(a,
d,{role:b}))}module.exports={run:function(){"undefined"==typeof Memory.muhid&&(Memory.muhid=1);for(var b in Memory.creeps)Game.creeps[b]||delete Memory.creeps[b];var a=["harvester","cow","upgrader","builder","guard"];b={harvester:2,cow:4,upgrader:3,builder:3,guard:3};for(var c in a)if(a=creeps_of_role(c).length,console.log(c+"|C:"+a+"|R:"+b[c]),a<b[c]){build_creep(c);break}}};
