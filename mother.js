var roles=require("roles"),util=require("util");function creeps_of_role(b){return _.filter(Game.creeps,function(a){return a.memory.role==b})}
function build_creep(b){var a=roles[b].parts;a||(a=roles.default_parts);var c=Game.spawns.Spawn2,d;d=0==c.room.find(FIND_MY_CREEPS).length?c.room.energyAvailable:c.room.energyCapacityAvailable;var e,f;for(f in a){var g=a[f];if(util.body_cost(g)<=d)e=g;else break}e?c.canCreateCreep(e)==OK&&(a=b+Memory.muhid,Memory.muhid++,c.createCreep(e,a,{role:b})):console.log("Part failure: "+b+", budget:"+d)}
module.exports={run:function(){"undefined"==typeof Memory.muhid&&(Memory.muhid=1);var b=["harvester","cow","upgrader","builder","guard"],a={harvester:2,cow:4,upgrader:3,builder:3,guard:3},c;for(c in b){var d=b[c];if(creeps_of_role(d).length<a[d]){build_creep(d);break}}}};
