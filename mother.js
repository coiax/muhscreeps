function creeps_of_role(a){return _.filter(Game.creeps,function(b){return b.memory.role==a})}
function build_creep(a){var b,c=Game.spawns.Spawn2,d;d=0==c.room.find(FIND_MY_CREEPS).length?300:c.room.energyCapacityAvailable;!b&&600<=d&&(b="guard"==a?[RANGED_ATTACK,RANGED_ATTACK,RANGED_ATTACK,MOVE,MOVE,MOVE]:[WORK,WORK,WORK,CARRY,CARRY,CARRY,MOVE,MOVE,MOVE]);!b&&400<=d&&(b="guard"==a?[RANGED_ATTACK,RANGED_ATTACK,MOVE,MOVE]:[WORK,WORK,CARRY,CARRY,MOVE,MOVE]);b||(b="guard"==a?[RANGED_ATTACK,MOVE]:[WORK,CARRY,MOVE]);c.canCreateCreep(b)==OK&&(d=a+Memory.muhid,Memory.muhid++,c.createCreep(b,d,{role:a}))}
module.exports={run:function(){"undefined"==typeof Memory.muhid&&(Memory.muhid=1);for(var a in Memory.creeps)Game.creeps[a]||delete Memory.creeps[a];a=["harvester","cow","upgrader","builder","guard"];var b={harvester:2,cow:4,upgrader:3,builder:3,guard:3},c;for(c in a)if(creeps_of_role(c)<b[c]){build_creep(c);break}}};
