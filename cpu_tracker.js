var util=require("util");function setup(){Memory.cpu||(Memory.cpu={});Memory.cpu.values_kept||(Memory.cpu.values_kept=1E3);Memory.cpu.roles||(Memory.cpu.roles={});Memory.cpu.main||(Memory.cpu.main={})}function add_value(a,b){a.push(b);a.length>Memory.cpu.values_kept&&a.splice(0,a.length-Memory.cpu.values_kept)}function calculate_average(a){var b=0;return a?(a.forEach(function(a){b+=a.used}),b/a.length):0}
module.exports={record_main:function(){setup();var a=Game.time,b=Game.cpu.getUsed();Memory.cpu.main.values||(Memory.cpu.main.values=[]);add_value(Memory.cpu.main.values,{time:a,used:b});a=_.map(Memory.cpu.main.values,_.property("used"));Memory.cpu.main.avg=util.mean(a);Memory.cpu.main.sd=util.standard_deviation(a)}};
